---
title: البناء والتشغيل
description: تعليمات بناء وتشغيل CLI وTUI وواجهة الويب على منصات متعددة.
---

import { Tabs, TabItem, Steps } from '@astrojs/starlight/components';

Safeparts مساحة عمل (workspace) بلغة Rust مع واجهة ويب اختيارية مبنية على WASM.

## المتطلبات

- Rust stable (يُفضّل rustup) + `rustfmt` و `clippy`
- Bun 1.3+ (لواجهة الويب)

## التثبيت (نسخ جاهزة)

يتم نشر نسخ جاهزة لـ Safeparts على GitHub Releases لنظام macOS وLinux وWindows:

- https://github.com/mustafamohsen/safeparts/releases

كل أرشيف يحتوي على:

- `safeparts` (واجهة CLI)
- `safeparts-tui` (واجهة طرفية)

<Tabs>
  <TabItem label="Linux">

```bash
# حمّل أرشيف Linux وملف SHA256SUMS.txt من صفحة الإصدارات.
tar -xzf safeparts-<version>-linux-<arch>.tar.gz

# اختياري: التحقق من checksum.
sha256sum -c SHA256SUMS.txt

# تثبيت.
sudo install -m 755 safeparts-<version>-linux-<arch>/safeparts /usr/local/bin/safeparts
sudo install -m 755 safeparts-<version>-linux-<arch>/safeparts-tui /usr/local/bin/safeparts-tui

# تحقق.
safeparts --help
safeparts-tui --help
```

  </TabItem>
  <TabItem label="macOS">

```bash
# حمّل أرشيف macOS وملف SHA256SUMS.txt من صفحة الإصدارات.
tar -xzf safeparts-<version>-macos-<arch>.tar.gz

# اختياري: التحقق من checksum.
shasum -a 256 -c SHA256SUMS.txt

# تثبيت.
sudo install -m 755 safeparts-<version>-macos-<arch>/safeparts /usr/local/bin/safeparts
sudo install -m 755 safeparts-<version>-macos-<arch>/safeparts-tui /usr/local/bin/safeparts-tui

# تحقق.
safeparts --help
safeparts-tui --help
```

  </TabItem>
  <TabItem label="Windows">

```powershell
# حمّل ملف zip الخاص بـ Windows وملف SHA256SUMS.txt من صفحة الإصدارات.
# فك الضغط في مسار مثل C:\Tools\safeparts\

# اختياري: التحقق من checksum (قارن الناتج مع SHA256SUMS.txt).
certutil -hashfile safeparts-<version>-windows-<arch>.zip SHA256

# تشغيل مباشر:
./safeparts.exe --help
./safeparts-tui.exe --help

# اختياري: أضف المجلد إلى PATH.
```

  </TabItem>
</Tabs>

## CLI + TUI (Rust)

<Tabs>
  <TabItem label="Linux">

```bash
rustup component add rustfmt clippy
cargo build
cargo test --all-features
```

بناء نسخ release:

```bash
cargo build -p safeparts --release
cargo build -p safeparts_tui --release
```

  </TabItem>
  <TabItem label="macOS">

```bash
rustup component add rustfmt clippy
cargo build
cargo test --all-features
```

  </TabItem>
  <TabItem label="Windows">

```powershell
rustup component add rustfmt clippy
cargo build
cargo test --all-features
```

نسخ release:

```powershell
cargo build -p safeparts --release
cargo build -p safeparts_tui --release
```

  </TabItem>
</Tabs>

## واجهة الويب (Vite + React + WASM)

واجهة الويب موجودة في `web/` وتتطلب خطوة بناء WASM.

<Steps>
  1. تثبيت اعتماديات JS.
  2. بناء حزمة WASM.
  3. تشغيل dev server.
</Steps>

<Tabs>
  <TabItem label="Linux/macOS">

```bash
cd web
bun install
rustup target add wasm32-unknown-unknown
bun run build:wasm
bun run dev
```

  </TabItem>
  <TabItem label="Windows">

سكربت `bun run build:wasm` يستخدم `bash -lc`. على Windows استخدم أحد الخيارات:

- WSL (مستحسن) ثم اتبع خطوات Linux.
- Git Bash (إن كان متوفراً) حتى يكون `bash` موجوداً في PATH.

أو نفّذ بناء WASM يدوياً:

```powershell
rustup target add wasm32-unknown-unknown
cargo install wasm-pack --locked --version 0.13.1
cargo install wasm-bindgen-cli --locked --version 0.2.108

cd web
wasm-pack build ..\crates\safeparts_wasm --mode no-install --target web --out-dir .\src\wasm_pkg
bun install
bun run dev
```

  </TabItem>
</Tabs>

## موقع المساعدة (هذه الوثائق)

هذا الموقع مبني بـ Starlight داخل `web/help/` ويُنشر تحت `/help/`.

```bash
cd web/help
bun install
bun run dev
```

ثم افتح:

- `http://localhost:4321/help/` (English)
- `http://localhost:4321/help/ar/` (العربية)

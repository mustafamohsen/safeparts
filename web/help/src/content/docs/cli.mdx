---
title: CLI
description: Script-friendly split and combine from the terminal.
---

import { Steps } from '@astrojs/starlight/components';

The CLI binary is <span class="token token--mono">safeparts</span>.
It reads from stdin by default and writes to stdout unless you pass <span class="token token--mono">-o</span>.

## Split

Split a secret from stdin into 3 shares, requiring any 2 to recover:

```bash
echo -n "my secret" | safeparts split -k 2 -n 3 -e base64
```

Write shares to a file:

```bash
echo -n "my secret" | safeparts split -k 2 -n 3 -e base64 -o shares.txt
```

## Combine

Combine from stdin (any <var>k</var> shares):

```bash
printf "%s\n%s\n" "<share1>" "<share2>" | safeparts combine
```

Write the recovered secret to a file:

```bash
printf "%s\n%s\n" "<share1>" "<share2>" | safeparts combine -o secret.bin
```

## Passphrases

:::caution
Prefer <span class="token token--mono">--passphrase-file</span> over <span class="token token--mono">--passphrase</span> in shells that keep history.
:::

Split with a passphrase:

```bash
echo -n "my secret" | safeparts split -k 2 -n 3 -e base64 -P passphrase.txt
```

Combine with a passphrase:

```bash
printf "%s\n%s\n" "<share1>" "<share2>" | safeparts combine -P passphrase.txt
```

## Practical workflow

<Steps>
1. Do a practice run with a synthetic secret.
2. Split the real secret.
3. Store shares in separate places.
4. Immediately test recovery with <var>k</var> shares.
5. Delete the original secret from temporary locations.
</Steps>

## Troubleshooting

- <samp>no shares provided</samp>: input was empty or only whitespace.
- <samp>could not detect share encoding</samp>: pass <span class="token token--mono">--encoding</span> explicitly.
- <samp>combine failed</samp>: shares are from different sets, corrupted, or the passphrase is wrong.
